<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>Halo Timer</title>
<link rel="stylesheet" type="text/css" href="css/jquery.countdown.css">
<link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.3.css">


<script src="scripts/jquery-1.11.1.js"></script>
<script src="scripts/jquery.plugin.js"></script>
<script src="scripts/jquery.countdown.js"></script>
<script src="scripts/jquery.mobile-1.4.3.js"></script>
<script src="scripts/jquery.textfill.js"></script>
<script type="text/javascript">


$(document).ready(function() {
   			$.ajax({url: 'media/halo_timer.mp3',
			});
			
});

$(function() {	

// load main timer paused
$('#mainTimer').countdown({until: '+30m +1s',
			compact: true, 
    		format: 'MS',
			description:''
			}); 
$('#mainTimer').countdown('toggle');


//load camo timer
$('#camoTimer').countdown({until: '+1m +0s',
			onExpiry: camoUp,
			compact: true, 
    		format: 'MS',
			description:''
			}); 
$('#camoTimer').countdown('toggle');
});



//restart camo timer
function camoUp(){
	$('#camoFill').width('15%');
	$('#camoTimer').countdown('destroy'); 
	$('#camoTimer').countdown({until: '+1m +0s',
			onExpiry: camoUp,
			compact: true, 
    		format: 'MS',
			description:''
			})
	$('#camoFill').animate({width: '100%'}, 59990,"linear"); 
};

// On Start button click...
$(function() {		
	$("#startButton").click( function()
			{ 
			//Start Timer
			$('#mainTimer').countdown('toggle');
			
			//Start Camo Timer with 1 sec delay
			setTimeout(function(){
        		$('#camoTimer').countdown('toggle');
				$('#camoFill').animate({width: '100%'}, 59990, "linear");
			}, 1000);
			
			//Hide Start Button
			$("#startButton").hide();
			
			  
});				

//Load/play halo_timer.mp3
$(function() {	
var audioElement = document.createElement('audio');
        		audioElement.setAttribute('src', 'media/halo_timer.mp3');
				

				
        $('#startButton').click(function() {
			//Start camo fill bar
			audioElement.play();
      ;
  }
);
		$('#resetButton').click(function() {
			location.reload();
			});
		
       
			
	});
	
})



</script>


</head>
<body data-role="page" data-theme="b">
	<div data-role="header" data-theme="b">
    <h1>Basic Timer</h1>
  	</div>
    

<div data-role="content" class="ui-body-b" id="container">
	<div id="timerContainer">
	<div id="mainTimer"></div>
    </div>

	    <button data-theme="a" data-role="button" id="startButton">START</button>
        
   <!--     <div id="startButton">START</div>
		</div>
    -->    
        
            <button data-theme="a" data-role="button" id="resetButton">RESET</button>

<div id="camoContainer">
	<div id="camoFill">
		<div id="camoimg">
        </div>
	</div>
</div>
<div id="camoTimer"></div>

     <!--       <div id="resetButton">RESET
            </div>
      -->
            
           
<!--            <div id="stopButton">stop</div> --></div>
</body>
</html>
